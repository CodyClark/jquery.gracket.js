(function(e){e.j.a=function(k){e.j.a.i={v:"g_gracket",k:"g_game",B:"g_round",m:"g_team",H:"g_winner",D:"g_spacer",h:"g_current",s:15,e:"g_canvas",n:"g_canvas",p:"#eee",o:"round",r:2,q:15,src:{}};var h=this,n=JSON.parse(h.data("gracket"))||JSON.parse(this.a.i.src),q,t,u;e.j.a.b={};var p={w:function(a){this.a.b=e.extend({},this.a.i,a);a=document.createElement("canvas");a.id=this.a.b.e;a.className=this.a.b.n;a.style.position="absolute";a.style.left=0;a.style.top=0;a.style.right="auto";h.g(this.a.b.v).append(a); t=n.length;for(a=0;a<t;a++){var m=g.c.round(this.a.b);h.append(m);u=n[a].length;for(var c=0;c<u;c++){var b=g.c.u(this.a.b),j=h.find("."+this.a.b.k).outerHeight(!0),j=g.c.C(this.a.b,j,a,0!==a&&0===c?!0:!1);0==c%1&&0!==a&&m.append(j);m.append(b);q=n[a][c].length;for(j=0;j<q;j++){var v=g.c.F(n[a][c][j],this.a.b);b.append(v);1===q&&(b.l().remove(),g.align.G(b,this.a.b,b.parent().l().children().f(0).height()),g.z(this.a.b,n,b.parent().l().children().f(1)))}}}}},g={c:{F:function(a,m){return team=e("<div />", {html:"<h3><span>"+(a.N||0)+"</span> "+a.name+"</h3>","class":m.m+" "+(a.id||"id_null")})},u:function(a){return game=e("<div />",{"class":a.k})},round:function(a){return round=e("<div />",{"class":a.B})},C:function(a,m,c,b){return spacer=e("<div />",{"class":a.D}).d({height:b?(Math.pow(2,c)-1)*(m/2):(Math.pow(2,c)-1)*m})},canvas:{A:function(a){a=document.getElementById(a.e);a.height=h.innerHeight();a.width=h.innerWidth();e(a).d({height:h.innerHeight(),width:h.innerWidth(),zIndex:1,L:"none"})},t:function(a, e,c){var b=document.getElementById(a.e).getContext("2d"),j=c.outerWidth(!0),g=c.outerHeight(!0),k=parseInt(h.d("paddingLeft"))||0,n=parseInt(h.d("paddingTop"))||0;c.d("marginBottom");var k=j+k,o=parseInt(h.find("> div").d("marginRight"))||0,d=a.s,r=a.q,q=c.height()-2*c.find("> div").f(1).height();_playerHt=c.find("> div").f(1).height();d>g/3&&(d=g/3);d>o/2&&(d=o/2-2);0>=d&&(d=1);r>o/3&&(r=o/3);b.strokeStyle=a.p;b.lineCap=a.o;b.lineWidth=a.r;b.beginPath();for(var a=Math.pow(2,e.length-2),c=0,s,p=0.5;1<= a;){for(s=0;s<a;s++){1==a&&(p=1);var f=k+c*j+c*o,i=p*o,l=((Math.pow(2,c-1)-0.5)*(c&&1)+s*Math.pow(2,c))*g+n+_playerHt+q/2;b.moveTo(f+r,l);1<a?b.lineTo(f+i-d,l):b.lineTo(f+i-r,l);a<Math.pow(2,e.length-2)&&(b.moveTo(f-j-r,l),b.lineTo(f-j-0.5*o,l));1<a&&0==s%2&&(b.moveTo(f+i,l+d),b.lineTo(f+i,l+Math.pow(2,c)*g-d),f=f+i-d,i=l+d,b.moveTo(f,i-d),b.arcTo(f+d,i-d,f+d,i,d),i=l+Math.pow(2,c)*g-d,b.moveTo(f+d,i-d),b.arcTo(f+d,i+d,f,i+d,d))}c++;a/=2}b.stroke()}}},align:{G:function(a,e,c){return a.g(e.H).d({"margin-top":c+ a.height()/2})}},z:function(a,h,c){e.J(e("."+a.m+" > h3"),function(){var b="."+e(this).parent().I("class").split(" ")[1];void 0!==b&&e(b).K(function(){e(b).g(a.h)},function(){e(b).M(a.h)})});g.c.canvas.A(a);g.c.canvas.t(a,h,c)}};if(p[k])return p[k].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof k||!k)return p.w.apply(this,arguments);e.error('Method "'+k+'" does not exist in gracket!')}})(jQuery);